<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HowTo build custom generators • grapherator</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="HowTo build custom generators">
<meta property="og:description" content="grapherator">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">grapherator</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/custom_generators.html">HowTo build custom generators</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Graph generation with grapherator</a>
    </li>
    <li>
      <a href="../articles/piping.html">Using magrittr pipes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jakobbossek/grapherator/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="custom_generators_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>HowTo build custom generators</h1>
                        <h4 class="author">Jakob Bossek</h4>
            
            <h4 class="date">2021-06-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jakobbossek/grapherator/blob/master/vignettes/custom_generators.Rmd"><code>vignettes/custom_generators.Rmd</code></a></small>
      <div class="hidden name"><code>custom_generators.Rmd</code></div>

    </div>

    
    
<div id="custom-generators" class="section level1">
<h1 class="hasAnchor">
<a href="#custom-generators" class="anchor"></a>Custom generators</h1>
<p>The <strong>graherator</strong> package already provides several node, edge and weight generators respectively. However, the collection is by far not complete and it does not aim to be. Therefore the user interface enables the definition of custom generators for each of the three steps (see <a href="introduction.html">basic graph generation vignette</a>). A generator is a simple function myGenerator = function(graph, …). The first argument needs to be a grapherator object. More arguments are possible, but optional. Each generator must return a named list. The first field must be either <em>coords</em> (matrix of node coordinates) for node generators, <em>adj.mat</em> (logical matrix defining the adjacency matrix) or <em>weights</em> (numeric matrix of weights or list of numeric matrices) for weight generators respectively. The second field is named <em>generator</em> and contains a short string representation of the generator, e.g., DEG for <strong>D</strong>elauney <strong>E</strong>dge <strong>G</strong>enerator.</p>
<p>In the following we demonstrate the definition of a custom edge generator, namely the <em>Threshold Edge Generator</em>. Given a graph and a positive numeric argument <em>threshold</em> this edge generator computes the pairwise Euclidean distances between the nodes and only keeps the edges whose distance is below the threshold value.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jakobbossek/grapherator">grapherator</a></span><span class="op">)</span>

<span class="va">addEdgesThreshold</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">graph</span>, <span class="va">threshold</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">n</span> <span class="op">=</span> <span class="fu"><a href="../reference/getter.html">getNumberOfNodes</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span>
  <span class="va">coords</span> <span class="op">=</span> <span class="fu"><a href="../reference/getter.html">getNodeCoordinates</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span>

  <span class="co"># compute distances</span>
  <span class="va">dists</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/dist.html">dist</a></span><span class="op">(</span><span class="va">coords</span>, method <span class="op">=</span> <span class="st">"euclidean"</span>, <span class="va">...</span><span class="op">)</span><span class="op">)</span>

  <span class="co"># define adjacency matrix</span>
  <span class="va">adj.mat</span> <span class="op">=</span> <span class="va">dists</span> <span class="op">&lt;</span> <span class="va">threshold</span>

  <span class="co"># no loops allowed</span>
  <span class="fu"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op">(</span><span class="va">adj.mat</span><span class="op">)</span> <span class="op">=</span> <span class="cn">FALSE</span>

  <span class="co"># return required format</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>adj.mat <span class="op">=</span> <span class="va">adj.mat</span>, generator <span class="op">=</span> <span class="st">"ThEG"</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Next, we create an example graph utilizing our custom edge generator.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># reproducability</span>
<span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/graph.html">graph</a></span><span class="op">(</span>lower <span class="op">=</span> <span class="fl">0</span>, upper <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/addNodes.html">addNodes</a></span><span class="op">(</span><span class="va">g</span>, n <span class="op">=</span> <span class="fl">25</span>, generator <span class="op">=</span> <span class="va">addNodesUniform</span><span class="op">)</span>
<span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/addEdges.html">addEdges</a></span><span class="op">(</span><span class="va">g</span>, generator <span class="op">=</span> <span class="va">addEdgesThreshold</span>, threshold <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>
<span class="co"># weight generation is skipped here</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">pl.coords</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="custom_generators_files/figure-html/unnamed-chunk-3-1.png" alt="Example network." width="50%"><p class="caption">
Example network.
</p>
</div>
<p>Due to smart internals the custom generators automatically work for intra- or intercluster linking without any adaptations. In the next example, we create a clustered network, apply the threshold edge generator for each cluster separately and connect cluster centers utilizing another edge generator.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># reproducability</span>
<span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/graph.html">graph</a></span><span class="op">(</span>lower <span class="op">=</span> <span class="fl">0</span>, upper <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/addNodes.html">addNodes</a></span><span class="op">(</span><span class="va">g</span>, n <span class="op">=</span> <span class="fl">5</span>, generator <span class="op">=</span> <span class="va">addNodesUniform</span><span class="op">)</span>
<span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/addNodes.html">addNodes</a></span><span class="op">(</span><span class="va">g</span>, n <span class="op">=</span> <span class="fl">25</span>, by.centers <span class="op">=</span> <span class="cn">TRUE</span>, generator <span class="op">=</span> <span class="va">addNodesGrid</span>, lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span>
<span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/addEdges.html">addEdges</a></span><span class="op">(</span><span class="va">g</span>, generator <span class="op">=</span> <span class="va">addEdgesThreshold</span>, threshold <span class="op">=</span> <span class="fl">13</span>, type <span class="op">=</span> <span class="st">"intracluster"</span><span class="op">)</span>
<span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/addEdges.html">addEdges</a></span><span class="op">(</span><span class="va">g</span>, generator <span class="op">=</span> <span class="va">addEdgesDelauney</span>, type <span class="op">=</span> <span class="st">"intercenter"</span><span class="op">)</span>
<span class="co"># weight generation is skipped here</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">pl.coords</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="custom_generators_files/figure-html/unnamed-chunk-4-1.png" alt="Example network." width="50%"><p class="caption">
Example network.
</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jakob Bossek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
